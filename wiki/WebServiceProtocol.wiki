#summary We describe here ndjin HTTP/JSON and XML protocol.

= Overview =

NDJIN webservices are accessible via GET or POST HTTP requests. 

All data encoding MUST be done using *UTF-8* encoding.

Data and HTTP responses could be formatted using either [http://json.org JSON] or XML.

[http://bob.pythonmac.org/archives/2005/12/05/remote-json-jsonp/ JSONP] is supported allowing you cross domain scripting features.

*Request paremeters*

An HTTP request should have following parameters:

|| Parameters || ||
|| `requestDataType` || `data` request parameter format: could be `json` or `xml` ||
|| `responseDataType` || response format: could be `xml`, `json` or `jsonp`  ||
|| `callback` || optional, in case of [http://bob.pythonmac.org/archives/2005/12/05/remote-json-jsonp/ jsonp] response callback is required ||
|| `data` || request data that will be deserialized and passed to webservice  ||


*Response*

Content response are directly send to the HTTP output stream formatted according to the `responseDataType` value with content type:

||responseDataType || Content-Type ||
|| `xml` || text/xml ||
|| `json` or `jsonp` || application/jsonrequest ||

Response is structured as follow:

|| `result` || contains the webservice data response if any ||
|| `state` || one literal values: `OK`, `SERVER_ERROR`, `PROTOCOL_ERROR`, `SECURITY_ERROR` ||
|| `error` || in case of error state it should contains field `message` and `cause` ||




*Example of HTTP request using Javascript [http://jquery.org JQuery]/JSONP*

{{{
var webserviceURL = "http://..."
var jsonData = "..."

$.ajax({
 url: webserviceURL,
 dataType: "jsonp",
 data: { requestDataType:'json', responseDataType:'jsonp', data: jsonData },
 success: function ( dataResponse, textStatus )
 {
  var result = dataResponse.result
  var state = dataResponse.state
  if( state == 'SERVER_ERROR' )
  {
   var error = dataResponse.error
   var errorMessage = error.message
   var errorCause = error.cause
  }

 }

}}}


= JSON =



= XML =

Content Type: 

{{{
<?xml version='1.0' encoding='UTF-8'?>
<response xmlns:ds='http://ndjin.net/ds/1.0/'
 xmlns:s='urn:ds:string'
 xmlns:d='urn:ds:date'
 xmlns:l='urn:ds:localestring'
 xmlns:n='urn:ds:number'
 xmlns:b='urn:ds:boolean'
 xmlns:r='urn:ds:ref'>
</response>
}}}